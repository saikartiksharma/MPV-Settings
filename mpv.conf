# ================================================================
# ðŸŸ¢ OPTIMIZED MPV CONFIGURATION FOR AMD RYZEN 5 5600H + RX 5500M
# Windows 11 â€¢ 7.5GB RAM â€¢ Vulkan â€¢ Balanced Performance/Quality
# ================================================================

# ===== GPU / Output Configuration =====
hwdec=auto-safe
profile=gpu-hq
vo=gpu-next
gpu-api=vulkan
gpu-context=winvk
vulkan-device="Radeon RX 5500M"
vulkan-async-compute=yes
swapchain-depth=3
glsl-shader-watch=no
glfinish=no

# ===== Scaling Configuration (Balanced Performance/Quality) =====
scale=mitchell
cscale=mitchell
dscale=mitchell
correct-downscaling=yes
linear-downscaling=yes
dither-depth=auto

# ===== Debanding (Optimized for RX 5500M) =====
deband=yes
deband-iterations=2
deband-threshold=32
deband-range=14
deband-grain=12

# ===== HDR / Tone Mapping =====
hdr-compute-peak=no
tone-mapping=bt.2390
tone-mapping-param=0.8
target-colorspace-hint=auto
target-peak=auto
target-trc=auto
target-prim=auto
icc-profile-auto=yes
inverse-tone-mapping=no


# ===== Playback / Sync Optimization =====
video-sync=display-resample
vsync=yes
interpolation=no
tscale=linear
autofit-larger=100%x100%
force-window=yes
keep-open=yes
save-position-on-quit=yes
cursor-autohide=1000
hr-seek-framedrop=yes
seek=absolute+exact

# ===== Audio Configuration =====
ao=wasapi
audio-thread=yes
audio-channels=stereo
volume=100
volume-max=150
audio-normalize-downmix=yes
audio-file-auto=yes
balance=0.0

# ===== OSD / UI Configuration =====
osc=yes
osd-level=1
osd-font="Segoe UI Semibold"
osd-font-size=32
osd-color="#FFFFFFFF"
osd-border-color="#000000"
osd-border-size=3
osd-shadow-offset=2
osd-shadow-color="#000000"
osd-duration=1000

# ===== Subtitles Configuration =====
sub-auto=fuzzy
sub-font="Arial Bold"
sub-font-size=42
sub-color="#FFFFFFFF"
sub-border-color="#000000"
sub-border-size=3
sub-shadow-offset=2
sub-shadow-color="#000000"
sub-margin-y=60
sub-ass-force-style='PlayResX=1920,PlayResY=1080,BorderStyle=3,Outline=3,Shadow=2,FontName=Arial Bold,MarginV=60'

# ===== Screenshots Configuration =====
screenshot-format=png
screenshot-high-bit-depth=yes
screenshot-png-compression=7
screenshot-directory="~/Pictures/mpv"
screenshot-template="%F-%p-%t"
screenshot-tag-file=yes

# ===== Recording Configuration =====
# Default recording settings
record-file=~/Videos/mpv_recording_%Y%m%d_%H%M%S.mkv
record-rate=60
record-codec=libx264
record-encoder-options=crf=23,preset=fast,tune=film
record-format=mkv
record-quality=high
record-subtitles=yes
record-audio=yes
record-video=yes

# ===== Window Management =====
fullscreen=no
autofit=85%x85%
geometry=50%:50%
border=yes
window-scale=1.0
keepaspect-window=yes
title="${media-title} - MPV"

# ===== Logging and Debugging =====
msg-color=yes
msg-module=yes
msg-level=all=warn
log-file=~~/mpv.log

# ===== Network and Streaming =====
network-timeout=30
http-header-fields=["User-Agent: mpv"]
stream-buffer-size=64k

# ===== Advanced Performance Tuning =====
gpu-tex-pad=2
gpu-tex-max-filter-size=16
gpu-shader-cache-dir="~~/mpv-shader-cache"
script-opts=ytdl_hook-ytdl_path=youtube-dl
script-opts=ytdl_hook-ytdl_format=bestvideo[height<=1080]+bestaudio/best

# Load recording manager script
script=~/mpv/record_manager.lua

# Load Stream Save script
script=streamsave.lua

# Stream Save configuration
script-opts=streamsave-save_directory=~/Videos/mpv_recordings
script-opts=streamsave-dump_mode=ab
script-opts=streamsave-fallback_write=yes
script-opts=streamsave-output_label=increment
script-opts=streamsave-force_extension=.mkv
script-opts=streamsave-range_marks=no
script-opts=streamsave-track_packets=no
script-opts=streamsave-autostart=no
script-opts=streamsave-autoend=no
script-opts=streamsave-hostchange=no
script-opts=streamsave-on_demand=no
script-opts=streamsave-quit=no
script-opts=streamsave-piecewise=no

